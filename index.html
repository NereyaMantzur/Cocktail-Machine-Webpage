<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cocktail Machine</title>

    <!-- Google Fonts Integration -->
    <link
        href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Roboto:wght@300;400;500&display=swap"
        rel="stylesheet">

    <style>
        body {
            overflow-x: hidden;
            text-align: center;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #444;
            color: #fff;
        }

        /* Top bar, titles, and cocktail names using a serif font */
        .top-bar,
        h1,
        h2,
        .cocktailItem h2,
        .cart-icon {
            font-family: 'Merriweather', serif;
        }

        /* Top bar */
        .top-bar {
            background-color: #111;
            display: flex;
            justify-content: space-between;
            /* Space between logo, nav links, and cart icon */
            align-items: center;
            /* Center items vertically */
            padding: 20px;
            /* Adjusted for consistent spacing */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }


        .logo {
            flex: 1;
            text-align: left;
        }

        .logo img {
            height: 40px;
        }

        .nav-links {
            list-style-type: none;
            display: flex;
            margin: 0;
            padding: 0;
            align-items: center;
            flex-grow: 1;
            justify-content: flex-end;
        }

        .nav-links li {
            margin: 0 15px;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .nav-links a:hover {
            background-color: #333;
        }

        .cart-icon {
            cursor: pointer;
            color: #fff;
            padding-right: 50px;
            /* Adjusted for spacing */
            margin-left: auto;
            /* Push the cart icon to the right */
        }


        /* Hamburger menu for mobile */
        .menu-icon {
            display: none;
            font-size: 24px;
            cursor: pointer;
            margin-right: 20px;
        }

        .nav-links.mobile {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 60px;
            right: 0;
            background-color: #111;
            width: 100%;
            z-index: 1000;
        }

        .nav-links.mobile li {
            padding: 15px 0;
            text-align: center;
            border-bottom: 1px solid #333;
        }

        .nav-links.mobile a {
            display: block;
            width: 100%;
        }

        /* Ensure margin below top bar */
        .container {
            max-width: 100%;
            margin-top: 60px;
            padding: 40px;
            text-align: center;
            background-color: #222;
            padding-bottom: 30px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.175);
        }

        h1 {
            color: #fff;
            font-size: 36px;
            margin-bottom: 20px;
        }

        .cocktail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
            padding: 5px;
        }

        .cocktailItem {
            padding: 5px;
            background-color: #161616;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
            transition: transform 0.2s;
        }

        .cocktailItem:hover {
            transform: scale(1.02);
        }

        .cocktailItem h2 {
            font-family: 'Merriweather', serif;
        }

        .cocktailItem img {
            width: 90%;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
        }

        button {
            background-color: #000;
            color: #fff;
            border: 1px solid #fff;
            padding: 7px 15px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 10px;
            font-family: 'Roboto', sans-serif;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #333;
        }

        /* Cart Sidebar */
        #cart-sidebar {
            position: fixed;
            top: 0;
            right: -1000%;
            width: 300px;
            height: 100%;
            background-color: #111;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
            padding: 20px;
            transition: right 0.3s ease;
            z-index: 1001;
        }

        #cart-sidebar.open {
            right: 0;
        }

        /* Cart item styles */
        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .cart-item-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 10px;
        }

        .cart-item button {
            margin: 0 5px;
            background-color: #333;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .cart-item button:hover {
            background-color: #555;
        }

        /* Contact Us form styling */
        #contact-form {
            max-width: 600px;
            /* Adjusted max-width for better centering */
            margin: 20px auto;
            /* Center the form horizontally */
            padding: 20px;
            background-color: #161616;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            display: flex;
            /* Use flexbox for better alignment */
            flex-direction: column;
            /* Stack children vertically */
            align-items: center;
            /* Center children horizontally */
        }

        #contact-form label {
            display: block;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #fff;
            width: 80%;
            /* Full width for labels */
            text-align: left;
            /* Align label text to the left */
        }

        #contact-form input,
        #contact-form textarea {
            width: 80%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #333;
            color: #fff;
            font-size: 14px;
            box-sizing: border-box;
            /* Prevents overflow */
        }

        #contact-form textarea {
            resize: vertical;
            /* Allow vertical resizing only */
            min-height: 100px;
            /* Set a minimum height for the textarea */
        }

        #contact-form button {
            background-color: #333;
            color: #fff;
            border: 1px solid #fff;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            width: 50%;
            /* Full width for button */
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        #contact-form button:hover {
            background-color: #444;
        }

        /* Mobile responsiveness */
        @media screen and (max-width: 600px) {
            .cart-icon {
                color: #fff;
                padding-right: 40px;
            }

            .top-bar {
                padding: 10px 20px;
            }

            .container {
                padding: 20px;
                margin-right: 0;
                /* Center the container */
            }

            h1,
            h2,
            p,
            .cocktailItem {
                text-align: center;
            }

            .cocktail-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .cocktailItem img {
                width: 100%;
                height: auto;
            }

            #cart-sidebar {
                width: 85%;
                height: auto;
            }

            button {
                font-size: 18px;
                padding: 15px;
                width: 60%;
            }

            .menu-icon {
                display: block;
                color: white;
            }

            .nav-links {
                display: none;
            }

            .nav-links.show {
                display: flex;
                flex-direction: column;
                background-color: #111;
                position: absolute;
                width: 100%;
                top: 70px;
                left: 0;
            }

            .nav-links.show li {
                border-bottom: 1px solid #333;
            }

            .nav-links.show a {
                padding: 15px;
            }
        }

        /* Anchor link scroll offset fix for top bar */
        :target::before {
            content: "";
            display: block;
            height: 80px;
            margin-top: -80px;
        }
    </style>


</head>

<body>
    <nav class="top-bar">
        <div class="logo">
            <img src="./images/Logo.png" alt="Company Logo">
        </div>
        <ul class="nav-links">
            <li><a href="#about">About Us</a></li>
            <li><a href="#order">Order</a></li>
            <li><a href="#faq">FAQ</a></li>
            <li><a href="#contact">Contact Us</a></li>
        </ul>
        <div class="cart-icon" onclick="toggleCart()">
            🛒 Cart
        </div>
    </nav>

    <div class="container" id="main-container" onclick="toggleCart()">
        <section id="about" style="text-align: left;">
            <h1>About Us</h1>
            <p>We are second-year students in the honors program at Afeka College of Engineering in Tel Aviv.<br>
                Our team consists of Dotan Valano, Ohad Agam, Roy Dor, Nerya Mantzur, and Aviv Bachana.</p>
            <p>Over the past year, Israel has been under attack, leading to the evacuation of many citizens from their
                homes. As a group, we decided to brainstorm technological ideas that could assist those returning to
                their homes in community centers—ideas that would enhance social experiences and help rebuild
                communities.</p>
            <p>Our group chose to create a cocktail machine that would be installed in these community centers. This
                machine automatically prepares cocktails, from receiving the order to serving the drink, aiming to bring
                people together and foster a sense of community.</p>
        </section>

        <section id="order">
            <h1>Order Your Cocktail</h1>
            <div class="cocktail-grid" id="cocktailItem">
                <div class="cocktailItem">
                    <h2>Margarita</h2>
                    <img src="./images/margarita.jpg" alt="Margarita" />
                    <p>Price: $10</p>
                    <button onclick="addToCart('Margarita',1, 10)">Add to
                        Cart</button>
                </div>

                <div class="cocktailItem">
                    <h2>Martini</h2>
                    <img src="./images/martini.jpg" alt="Martini" />
                    <p>Price: $12</p>
                    <button onclick="addToCart('Martini',1, 12)">Add to
                        Cart</button>
                </div>

                <div class="cocktailItem">
                    <h2>Bloody Mary</h2>
                    <img src="./images/bloodyMary.jpg" alt="Bloody Mary" />
                    <p>Price: $11</p>
                    <button onclick="addToCart('Bloody Mary', 1, 11)">Add
                        to Cart</button>
                </div>

                <div class="cocktailItem">
                    <h2>Pina Colada</h2>
                    <img src="./images/pinaColada.avif" alt="Pina Colada" />
                    <p>Price: $13</p>
                    <button onclick="addToCart('Pina Colada',1, 13)">Add
                        to Cart</button>
                </div>

                <div class="cocktailItem">
                    <h2>DIY</h2>
                    <img src="./images/diy.jpg" alt="DIY" />
                    <p>Price: $15</p>
                    <button onclick="addToCart('DIY', 1, 15)">Add to
                        Cart</button>

                    <!-- Dropdowns for selecting ingredients and amounts in the same line -->
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <label for="ingredient1" style="flex: 1; font-size: 12px;">Ingredient 1:</label>
                        <select id="ingredient1" class="ingredient-select" style="flex: 2; margin-right: 10px;">
                            <option value="">Select an ingredient</option>
                            <option value="jin">Jin</option>
                            <option value="vodka">Vodka</option>
                            <option value="rum">Rum</option>
                            <option value="whiskey">Whiskey</option>
                            <option value="orange">Orange Juice</option>
                            <option value="tonic">Tonic Water</option>
                            <option value="coke">Coke</option>
                        </select>
                        <select id="amount1" style="flex: 1;">
                            <option value="30">30 ml</option>
                            <option value="60">60 ml</option>
                            <option value="90">90 ml</option>
                        </select>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <label for="ingredient2" style="flex: 1; font-size: 12px;">Ingredient 2:</label>
                        <select id="ingredient2" class="ingredient-select" style="flex: 2; margin-right: 10px;">
                            <option value="">Select an ingredient</option>
                            <option value="jin">Jin</option>
                            <option value="vodka">Vodka</option>
                            <option value="rum">Rum</option>
                            <option value="whiskey">Whiskey</option>
                            <option value="orange">Orange Juice</option>
                            <option value="tonic">Tonic Water</option>
                            <option value="coke">Coke</option>
                        </select>
                        <select id="amount2" style="flex: 1;">
                            <option value="30">30 ml</option>
                            <option value="60">60 ml</option>
                            <option value="90">90 ml</option>
                        </select>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <label for="ingredient3" style="flex: 1; font-size: 12px;">Ingredient 3:</label>
                        <select id="ingredient3" class="ingredient-select" style="flex: 2; margin-right: 10px;">
                            <option value="">Select an ingredient</option>
                            <option value="jin">Jin</option>
                            <option value="vodka">Vodka</option>
                            <option value="rum">Rum</option>
                            <option value="whiskey">Whiskey</option>
                            <option value="orange">Orange Juice</option>
                            <option value="tonic">Tonic Water</option>
                            <option value="coke">Coke</option>
                        </select>
                        <select id="amount3" style="flex: 1;">
                            <option value="30">30 ml</option>
                            <option value="60">60 ml</option>
                            <option value="90">90 ml</option>
                        </select>
                    </div>

                </div>

            </div>
        </section>

        <section id="faq" style="text-align: left;">
            <h1>FAQ</h1>
            <div class="faq-item">
                <h2>What was the inspiration behind your project?</h2>
                <p>As evacuees return to their homes, we want them to be able to rebuild their communities, connect, and
                    enjoy the simple things in life again. Alcohol is a significant social focus for many people, and it
                    can help achieve just that.</p>
            </div>
            <div class="faq-item">
                <h2>How does your cocktail machine work?</h2>
                <p>The cocktail machine operates using a barcode scan that directs the user to our website. On the
                    website, users can order a variety of pre-made cocktails or create a custom drink. The website sends
                    the command to the machine, which is powered by an Arduino. The Arduino sends the command to the
                    valves, which open the drink containers, thus assembling the drink.</p>
            </div>
            <div class="faq-item">
                <h2>What technologies did you use to build the machine?</h2>
                <p>The machine is powered by an Arduino that controls the valves opening the drink containers. The
                    commands are sent via our website after users scan a barcode or place an order directly.</p>
            </div>
            <div class="faq-item">
                <h2>Who is this cocktail machine intended for?</h2>
                <p>This machine is for anyone who loves technology, simplicity, speed, and, of course, alcohol.</p>
            </div>
            <div class="faq-item">
                <h2>What challenges did you encounter during development?</h2>
                <p>One of the significant challenges was integrating an ice machine into the system. Currently, our
                    machine does not support ice shaking, but a future version of the machine will include this feature.
                </p>
            </div>
        </section>

        <section id="contact">
            <h1>Contact Us</h1>
            <form id="contact-form">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" required>

                <label for="message">Message:</label>
                <textarea id="message" name="message" rows="4" required></textarea>

                <button type="submit">Send</button>
            </form>
        </section>
    </div>

    <div id="cart-sidebar">
        <h2>Your Cart</h2>
        <button onclick="toggleCart()">✖</button>
        <div id="cart-content">
            <!-- Cart items will be displayed here -->
        </div>
        <p>Total: $<span id="total-price">0</span></p>
        <button onclick="placeOrder()">Place Order</button>
    </div>

    <script type="module" defer>
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js";

        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBg05UpDLjM6M-p2eY8U6WeFGe61vtYBC4",
            authDomain: "cocktails-6acf5.firebaseapp.com",
            databaseURL: "https://cocktails-6acf5-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "cocktails-6acf5",
            storageBucket: "cocktails-6acf5.appspot.com",
            messagingSenderId: "809622484576",
            appId: "1:809622484576:web:da16e7f3063ebf9f253505",
            measurementId: "G-JMB3NE6XHN"
        };
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        let cart = {};
        let orderCounter = 1; // Initialize a counter for order IDs
        let currentOrderStatus = 'complete'; // Initial order status

        // Function to toggle mobile menu
        window.toggleMenu = function () { // Make it available globally
            const navLinks = document.querySelector('.nav-links.mobile');
            navLinks.classList.toggle('show'); // Toggle the 'show' class
        };

        // Add cocktail to cart
        window.addToCart = function (drink, quantity, price) {
            quantity = parseInt(quantity);
            if (quantity > 0) {
                if (currentOrderStatus === 'complete') {
                    // Allow only one cocktail in the cart
                    cart = { drink, quantity, price };
                    updateCartDisplay();
                    alert(`${quantity} ${drink}(s) added to cart`);
                } else {
                    alert("Cannot place another order until the current one is complete.");
                }
            } else {
                alert("Please select a valid quantity.");
            }
        };

        // Toggle cart display
        window.toggleCart = function () {
            const cartSidebar = document.getElementById('cart-sidebar');
            cartSidebar.classList.toggle('open');
        };

        // Place order and send it to Firebase
        window.placeOrder = async function () {
            if (cart.drink && currentOrderStatus === 'complete') {
                try {
                    await set(ref(database, 'cocktailName'), cart.drink);
                    await set(ref(database, 'orderStatus'), "pending");
                    currentOrderStatus = "pending"; // Update local variable
                    alert("Order placed successfully!");

                    // Clear the cart after placing the order
                    cart = {};
                    updateCartDisplay();
                } catch (error) {
                    console.error("Error sending data to Firebase:", error);
                    alert("Error communicating with Firebase. Please check the connection.");
                }
            } else if (currentOrderStatus === 'pending') {
                alert("Order is pending. Wait for the current order to complete.");
            } else {
                alert("Cart is empty. Please add a cocktail to your cart.");
            }
        };

        // Listen for changes to order status in Firebase
        const orderStatusRef = ref(database, 'orderStatus');
        onValue(orderStatusRef, (snapshot) => {
            const orderStatus = snapshot.val();
            currentOrderStatus = orderStatus;
        });

        // Update cart display in the sidebar
        function updateCartDisplay() {
            const cartContent = document.getElementById('cart-content');
            let totalPrice = 0;
            cartContent.innerHTML = '';

            if (cart.drink) {
                totalPrice += cart.price * cart.quantity;
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';

                const cartText = document.createElement('p');
                cartText.textContent = `${cart.drink} ($${cart.price} each)`;

                cartItem.appendChild(cartText);
                cartContent.appendChild(cartItem);
            }

            document.getElementById('total-price').textContent = totalPrice.toFixed(2);
        }

        // Handle LED control
        document.addEventListener('DOMContentLoaded', () => {
            const ledOnButton = document.getElementById('ledOn');
            const ledOffButton = document.getElementById('ledOff');

            // Control LED status by sending 1 or 0 to Firebase
            ledOnButton.addEventListener('click', () => set(ref(database, 'ledStatus'), 1));
            ledOffButton.addEventListener('click', () => set(ref(database, 'ledStatus'), 0));

            // Listen for changes to LED status in Firebase
            const ledStatusRef = ref(database, 'ledStatus');
            onValue(ledStatusRef, (snapshot) => {
                const ledStatus = snapshot.val();
                document.getElementById('status').innerText = ledStatus == 1 ? "LED is ON" : "LED is OFF";
            });
        });
    </script>

</body>

</html>